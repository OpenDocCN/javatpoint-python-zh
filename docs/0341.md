# 使用 Python 的物联网

> 原文：<https://www.javatpoint.com/internet-of-things-with-python>

通常，原型或现实生活中的物联网(IoT)系统必须快速而胜任地设计和开发。每当这种情况发生时，有两个活动会立即活跃起来:一个是对物联网设备进行编程，另一个是组织后端与这些设备进行交互。

在这两个活动中，我们可以利用 Python 编程语言进行开发。或者，我们可以利用一个功能实用的 MicroPython 版本，在计算资源少的设备上工作，因此价格非常低。

在接下来的教程中，我们将了解 Python 在编程[物联网(IoT)](https://www.javatpoint.com/iot-internet-of-things) 设备中的使用，并为它们创建一个工作后端。

但在我们谈到这一点之前，让我们简单讨论一下物联网的重要性。

## 了解物联网的重要性

“物联网”一词最早是由凯文·阿什顿在 1999 年创造的。自从物联网的重要性和规模爆发以来，其中一个主要指标是，2018 年物联网的市场规模为 1510 亿美元，并逐年稳步增长。根据营销人员的预测，到 2022 年，物联网市场可能会突破 5610 亿美元大关。

回到过去，我们可以用如下所示的例子来解释物联网:

"我们可以利用电话打开和关闭房间里的灯泡。"

如今，几乎没有人会对智能电表感到惊讶，它可以传输用电量读数，将这些信息上传到云上，并产生直接发送到电子邮件的月度账单。

物联网越来越多地在各行各业得到利用，以简化流程并提高效率。例如，制造业生产线和农业是受益于物联网不同特性的各种行业的典范。在特定的农业场景中，物联网有助于协调收割机和装有电梯的卡车，以高效处理谷物。

## 为什么在物联网中使用 Python？

对于许多开发人员来说，Python 被认为是市场上的首选语言。它学习简单，语法干净，并且有一个庞大的在线社区支持它。说到物联网，Python 成为了一个很好的选择。我们既可以将其用于开发的后端，也可以用于设备的软件开发。此外，Python 可以在 Linux 设备上工作，我们可以将 MicroPython 用于微控制器。

Python 是一种编码语言，我们可以用它来减少需要处理的数据量，并且可以在云中访问。无论我们是从头开始创建物联网项目，还是与致动器、传感器和附件进行交互，Python 都能识别这些需求。

在物联网设备上使用 Python 的许多好处中，有一些是针对所有类型平台的大量库，以及它为我们开发代码提供的速度。

Python 是开发设备原型的绝佳盟友。即使我们在生产 C、C++或 Java 时重写一些脚本来提高性能，系统在 Python 中通常也会完美运行。

## Python 中物联网的最佳解决方案是什么？

Python 编程语言中物联网的一些最佳解决方案如下:

1.  树莓皮上的Python
2.  PyBoard 上的 Python
3.  带微体的 ESP8266、ESP32

我们将简要讨论每个解决方案。

### 树莓皮上的Python

在脑海中弹出的物联网设备上运行 Python 的主要目标是从表中抓取树莓皮。Python 预装在操作系统中，留给我们的唯一目标就是编写编码脚本。

在这个场景中，我们可以控制树莓皮扩展栏上的输入/输出端口。幸运的是，该板支持无线通信(蓝牙和 WiFi)和以太网。我们还可以将一个显示器连接到 HDMI 输出，一个专门的 3.2 英寸 320x240 薄膜晶体管液晶显示器，或者树莓皮的低能耗 E-Ink 2.13 英寸 250x122 显示器。

有多种计算能力和预算的控制器可供选择。我们可以为物联网系统选择这些控制器——从快速的树莓 Pi 4 Model B 8 GB 到最小的树莓 Pi Zero，都支持 Python 编程语言。如果有必要，我们可以安装 Python 2.7 的早期版本，以获得过去的兼容性。

让我们考虑下面的 Python 代码片段，其中我们使用了 GPIO Zero 库来控制输入/输出端口。

**示例:**

```py

# importing the required modules
from gpiozero import Button
from time import sleep

# creating an object of Button
the_button = Button(2)

# using the if-else statement
while True:
    if the_button.is_pressed:
        print("Button Pressed")
    else:
        print("Button Released")
    sleep(1)

```

**说明:**

上面的例子演示了通过在释放时按下第二个引脚上的按钮来接收和处理信号。

利用这种方法的好处是，基于树莓皮的最复杂设备可以使用各种各样的开发工具、库和通信，包括摄像机的视频处理。

### PyBoard 上的 Python

Python 在物联网设备中的另一个很好的解决方案是带有 STM32F405RG 微控制器的 PyBoard。

PyBoard 被认为是一款紧凑型产品，也是一款功能强大的电子产品开发板。它在 MicroPython 上工作。PyBoard 通过 USB 连接到 PC，为我们提供了一个 USB 闪存驱动器来存储 Python 脚本和一个用于即时编程的串行 Python 提示符(一个 REPL)。这适用于 Windows、MacOS 和 Linux。

PyBoard 执行 MicroPython，这是标准 CPython 解释器的轻量级实现。官方文档还表示:“MicroPython 是 Python 3 编程语言的精简高效的实现，它包含了 Python 标准库的一小部分，并针对在微控制器和受限环境中运行进行了优化。MicroPython pyboard 是一款在裸机上运行 micro Tyson 的紧凑型电子线路板，给你一个低级的 Python 操作系统，可以用来控制各种电子项目。MicroPython 充满了高级功能，如交互式提示、任意精度整数、闭包、列表推导、生成器、异常处理等。然而，它足够紧凑，只需 256k 的代码空间和 16k 的内存就可以安装和运行。”

MicroPython 是 Python(3.4 版)编程语言的完全重写，适合在微控制器上运行。它涉及各种效率优化，消耗的内存相当少。

MicroPython 在 PyBoard 上裸机执行，必然给我们提供了一个基于 Python 的操作系统。内置 pyb 模块由功能和类组成，用于控制板上可用的外设，如 I2C、通用异步收发器、模数转换器、数模转换器和串行接口。

该板的尺寸令人印象深刻，约占四分之二，33 毫米 x 43mm 毫米，仅重 6 克。

### 带有微型 Python 的 ESP8266、ESP32

另一个选择是使用 ESP8266 和 ESP 32 来运行 Python。我们必须创建一个基于物联网的设备，具有低功耗、强大的功能以及与无线 Wi-Fi 网络的集成。更准确地说，我们可以使用 MicroPython。

一旦我们在系统上安装了 Python，我们就可以使用命令行中的 pip 安装程序来安装 **esptool** 模块。其语法如下所示:

**语法:**

```py

$ pip install esptool

```

MicroPython 的安装过程非常简单。我们可以从网站下载固件，在 esptool 的帮助下安装，安装之前不要忘记格式化板卡。

我们也可以使用一个用于用 MircoPython 开发的 ide。整个开发过程在工作计算机上进行，然后编译并保存在 ESP8266 或 ESP32 微控制器的存储器中。

让我们考虑下面的例子，看看这个脚本看起来有多简单:

**示例:**

```py

# importing the required modules
from machine import Pin
import time

# creating an object of Pin
ledPin = Pin(2, Pin.OUT)

# using some functions
while True:
    ledPin.on()
    time.sleep(1)
    ledPin.off()
    time.sleep(1)

```

**说明:**

在上面的代码片段中，我们已经从**机器**库中导入了 **Pin** 模块以及**时间**模块。然后我们创建了一个 **Pin** 的对象，并在其上执行一些功能。

与常规 Python 相比，MicroPython 强加了许多限制；然而，一般来说，我们可以很容易地在客户端编写必要的功能，并在 ESP 微控制器上有效地执行。这种选择相对比购买 PyBoard 更具成本效益。

## 了解 Python 在物联网后端的使用

我们可以在许多方面使用 Python 作为物联网的后端编程语言。其中一些如下:

### 用 Python 实现 MQTT 协议

物联网设备最流行的连接方法之一是 MQTT，它是一种用于使用 Python 有效实现的协议。

MQTT 协议是一种机器对机器(M2M)/物联网连接协议，设计为一种高度轻量级的发布/订阅消息传输。它用于连接到需要小代码占用空间的远程位置，并且网络带宽非常宝贵。

名为 **Eclipse Paho MQTT** 的 Python 客户端库实现了 MQTT 协议的 3.1、3.1.1 和 5.0 版本。

**Poho** 库的代码提供了一个客户端类，允许应用链接到 MQTT 代理，以便发布消息、订阅主题和接收发布的消息。它还提供了一些助手函数，使得向 MQTT 服务器发布一次性消息变得更加简单。

而且这个库支持 Python 2.7.9 及以上或者 3.5 及以上。图像与旧版 Python 2.7 的集成非常简单。

### Python 中 Flask 上的物联网后端

我们还可以使用 Flask 微框架为物联网系统编写后端。Flask 微框架是一个快速、简单的工具，可以轻松设置服务器端的输入/输出信息，它还包含许多功能，使工作更加高效。

我们可以从决定我们必须从物联网设备服务的请求开始。然后我们必须建立 Flask 微框架并编写一段代码。然后 **GET** 方法会根据客户端的请求返回信息。

在某些情况下，我们最好在使用物联网设备时专注于 RESTful 协议。这使我们能够简化系统组件之间的交换，并有助于我们在未来扩展信息交换系统。

让我们考虑一个出现如下的任务:在网页上显示来自物联网设备的信息。Flask 微框架将通过其核心模板机制再次拯救我们，在这里我们可以设计出所需的网页，并显示包含图形的数据。

使用这种方法的缺点是可能无法启动从服务器到设备的数据传输。因此，物联网必须定期独立地从服务器上拉取。放心，因为有报告这种风险的关键。我们可以利用网络套接字或 Python 库来实现 Pushsafer。PushSafer 是一种简单而安全的方式，可以向 Android、iOS 和 Windows 设备(移动设备以及桌面设备)实时发送和接收推送通知，包括 Google Chrome、Mozilla Firefox、Opera 等互联网浏览器以及许多其他设备。

### Python 中的 Microsoft Azure 物联网后端

微软为物联网发布了一个新的开源扩展，以扩展 Azure CLI 2.0 的功能。Azure CLI 2.0 包含与 Azure 资源管理器和管理端点交互的命令。

例如，我们可以利用 Azure CLI 2.0 来构建 Azure 虚拟机或物联网中心。命令行界面的扩展允许 Azure 服务通过向用户提供对服务指定的附加功能的访问来补充 Azure 命令行界面。

物联网扩展为程序员提供了对物联网边缘、物联网集线器和物联网集线器设备供应服务功能的命令行访问。

Azure CLI 2.0 允许对 Azure 物联网集线器、设备供应服务实例和相关集线器的资源进行即时管理。新的物联网扩展丰富了 Azure CLI 2.0 的功能，例如设备管理和所有物联网边缘功能:

1.  Azure CLI 2.0 物联网功能-控制平面
2.  管理物联网中心、消费者群体和工作的实例
3.  管理设备供应服务、访问策略、链接集线器和证书的实例
4.  扩展的新特性-数据平面
5.  管理设备和边缘模块身份及其各自的双重定义
6.  向物联网中心查询设备和模块作业、双胞胎和消息路由等详细信息
7.  设备和模块的调用方法
8.  生成 SAS 令牌并获取连接字符串
9.  云到设备和设备到云消息传递
10.  设备文件上传
11.  用于测试的设备模拟

* * *